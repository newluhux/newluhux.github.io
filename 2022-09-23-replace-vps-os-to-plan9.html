<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-04-09 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org Mode" />
</head>
<body>
<div id="content" class="content">
<div id="outline-container-orgbf6aa48" class="outline-2">
<h2 id="orgbf6aa48">use 9front replace vps&rsquo;s operating system</h2>
<div class="outline-text-2" id="text-orgbf6aa48">
<p>
You can test this blog on local virtual machine
</p>
</div>

<div id="outline-container-org40423e0" class="outline-3">
<h3 id="org40423e0">Need</h3>
<div class="outline-text-3" id="text-org40423e0">
</div>
<div id="outline-container-orge3a2c37" class="outline-4">
<h4 id="orge3a2c37">out-of-band management console</h4>
<div class="outline-text-4" id="text-orge3a2c37">
<p>
Need a out-of-band management console to connect vps&rsquo;s screen
</p>
</div>
</div>

<div id="outline-container-org4a3cb92" class="outline-4">
<h4 id="org4a3cb92">kvm or bare metal</h4>
<div class="outline-text-4" id="text-org4a3cb92">
<p>
OpenVZ or other container technology not discussed here
</p>
</div>
</div>
</div>

<div id="outline-container-orgc7fc78e" class="outline-3">
<h3 id="orgc7fc78e">Stage 0 boot a linux in RAM</h3>
<div class="outline-text-3" id="text-orgc7fc78e">
</div>
<div id="outline-container-org3510994" class="outline-4">
<h4 id="org3510994">Download iPXE image</h4>
<div class="outline-text-4" id="text-org3510994">
<p>
MBR:
</p>

<div class="org-src-container">
<pre class="src src-shell"><code>wget http://boot.salstar.sk/ipxe/ipxe.usb  </code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6f54e09" class="outline-4">
<h4 id="org6f54e09">Write iPXE image to disk</h4>
<div class="outline-text-4" id="text-org6f54e09">
<div class="org-src-container">
<pre class="src src-shell"><code>sync # ensure data is sync to disk</code>
<code>dd if=ipxe.usb of=/dev/vda conv=sync # write image to harddisk</code>
<code>reboot -f # restart now</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org857866e" class="outline-4">
<h4 id="org857866e">use iPXE boot a linux in RAM</h4>
<div class="outline-text-4" id="text-org857866e">
<p>
now please connect vps&rsquo;s screen, use out-of-band management console
</p>

<p>
note: if vps privoder not have network autoconf, you may be need configure network manual
</p>

<p>
If it success, you now can seem a menu.
</p>

<p>
please select &rsquo;slackware&rsquo; to boot
</p>

<p>
if it failed:
</p>

<pre class="example">
<code>booting from Hard Disk...</code>
<code>iPXE initialising devices...ok</code>
<code></code>
<code></code>
<code></code>
<code>iPXE 1.21.1+ (g081b3) -- Open Source Network Boot Firmware -- https://ipxe.org</code>
<code>Features: DNS FTP HTTP HTTPS iSCSI TFTP SRP VLAN AoE ELF MBOOT PXE bzImage Menu </code>
<code>PXEXT</code>
<code></code>
<code>boot.salstar.sk - SAL's boot menu</code>
<code></code>
<code>Waiting for link-up on net0... ok</code>
<code>Configuring (net0 52:54:00:12:34:56)...... ok</code>
<code>IP: 10.0.2.15, netmask: 255.255.255.0, gateway: 10.0.2.2</code>
<code>Could not get time and date: Connection timed out (https://ipxe.org/4c496035)</code>
<code>https://boot.salstar.sk/by_mac/52:54:00:12:34:56... Network unreachable (https:/</code>
<code>/ipxe.org/280a6011)</code>
<code>https://boot.salstar.sk/by_ip/10.0.2.15... Network unreachable (https://ipxe.org</code>
<code>/280a6011)</code>
<code>https://boot.salstar.sk/menu.ipxe... Network unreachable (https://ipxe.org/280a6</code>
<code>011)</code>
<code>Press any key to enter failsafe menu ...</code>
</pre>

<p>
please press ENTER to start failsafe menu.
</p>

<p>
select &rsquo;Start iPXE shell&rsquo;
</p>

<p>
iPXE shell:
</p>

<pre class="example">
<code>iPXE&gt; </code>
</pre>

<p>
you can boot &rsquo;slackware&rsquo; by:
</p>

<pre class="example">
<code>kernel ftp://&lt;ip addr or domain name&gt;/slackware/slackware64-current/kernels/huge.s/bzImage</code>
<code>initrd ftp://&lt;ip addr or domain name&gt;/slackware/slackware64-current/isolinux/initrd.img</code>
<code>boot</code>
</pre>

<p>
note: if your dns not working, please use ip address instead domain name.
</p>
</div>
</div>
</div>

<div id="outline-container-org46d5292" class="outline-3">
<h3 id="org46d5292">Stage 1 download 9front image and write to disk</h3>
<div class="outline-text-3" id="text-org46d5292">
</div>
<div id="outline-container-org33e518a" class="outline-4">
<h4 id="org33e518a">Download 9front image</h4>
<div class="outline-text-4" id="text-org33e518a">
<p>
use root login, then:
</p>

<div class="org-src-container">
<pre class="src src-shell"><code>dhcpcd eth0 # setup network</code>
<code>wget http://9front.org/iso/9front-&lt;version&gt;.amd64.iso.gz # download</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcfb4ecf" class="outline-4">
<h4 id="orgcfb4ecf">write 9front image to disk</h4>
<div class="outline-text-4" id="text-orgcfb4ecf">
<div class="org-src-container">
<pre class="src src-shell"><code>zcat 9front-&lt;version&gt;.amd64.iso.gz | dd bs=1M of=/dev/vda conv=sync # write</code>
<code>sync # ensure sync to disk</code>
<code>reboot # reboot</code>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org69d6095" class="outline-3">
<h3 id="org69d6095">Stage 2 install 9front</h3>
<div class="outline-text-3" id="text-org69d6095">
<p>
now you can install 9front.
</p>

<p>
but have some notice:
</p>
</div>

<div id="outline-container-org85b2954" class="outline-4">
<h4 id="org85b2954">configfs</h4>
<div class="outline-text-4" id="text-org85b2954">
<p>
if vps&rsquo;s disk size is small , please use hjfs.
</p>
</div>
</div>

<div id="outline-container-org60505e8" class="outline-4">
<h4 id="org60505e8">prepdisk</h4>
<div class="outline-text-4" id="text-org60505e8">
<p>
in prepdisk phases, you can&rsquo;t remove installation image&rsquo;s part.
</p>

<p>
safe method is create a new part in space outside the installation image
</p>

<pre class="example">
<code>If there is enough room, a Plan 9 partition will be</code>
<code>suggested; you can probably just type 'w' and then 'q'.</code>
<code></code>
<code>cylinder = 1048576 bytes</code>
<code>   empty                 0 463          (463 cylinders, 463.00 MB)</code>
<code>   * p1                  463 464        (1 cylinders, 1.00 MB) ESP</code>
<code>  '  p2                  464 4560       (4096 cylinders, 4.00 GB) PLAN9 # this is new part , outside of installation image</code>
<code>&gt;&gt;&gt; w</code>
<code>&gt;&gt;&gt; q</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0799d33" class="outline-3">
<h3 id="org0799d33">All is done</h3>
<div class="outline-text-3" id="text-org0799d33">
<p>
after installation, all is done, reboot your vps and use 9front!
</p>
</div>
</div>


<div id="outline-container-org13dce88" class="outline-3">
<h3 id="org13dce88">References</h3>
<div class="outline-text-3" id="text-org13dce88">
<p>
<a href="http://boot.salstar.sk/">http://boot.salstar.sk/</a>
</p>

<p>
<a href="http://9front.org/releases/">http://9front.org/releases/</a>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p>Last updated: 2023-04-02</p>
</div>
</body>
</html>
