<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-02-26 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
</head>
<body>
<div id="content">
<div id="outline-container-orgaea5f0b" class="outline-2">
<h2 id="orgaea5f0b">use 9front replace vps&rsquo;s operating system</h2>
<div class="outline-text-2" id="text-orgaea5f0b">
<p>
You can test this blog on local virtual machine
</p>
</div>

<div id="outline-container-orgc5ba4bc" class="outline-3">
<h3 id="orgc5ba4bc">Need</h3>
<div class="outline-text-3" id="text-orgc5ba4bc">
</div>
<div id="outline-container-org2d2c1e3" class="outline-4">
<h4 id="org2d2c1e3">out-of-band management console</h4>
<div class="outline-text-4" id="text-org2d2c1e3">
<p>
Need a out-of-band management console to connect vps&rsquo;s screen
</p>
</div>
</div>

<div id="outline-container-org42f8be8" class="outline-4">
<h4 id="org42f8be8">kvm or bare metal</h4>
<div class="outline-text-4" id="text-org42f8be8">
<p>
OpenVZ or other container technology not discussed here
</p>
</div>
</div>
</div>

<div id="outline-container-orgc499fea" class="outline-3">
<h3 id="orgc499fea">Stage 0 boot a linux in RAM</h3>
<div class="outline-text-3" id="text-orgc499fea">
</div>
<div id="outline-container-org8ec9bd3" class="outline-4">
<h4 id="org8ec9bd3">Download iPXE image</h4>
<div class="outline-text-4" id="text-org8ec9bd3">
<p>
MBR:
</p>

<div class="org-src-container">
<pre class="src src-shell"><code>wget http://boot.salstar.sk/ipxe/ipxe.usb  </code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7ae2b4f" class="outline-4">
<h4 id="org7ae2b4f">Write iPXE image to disk</h4>
<div class="outline-text-4" id="text-org7ae2b4f">
<div class="org-src-container">
<pre class="src src-shell"><code>sync # ensure data is sync to disk</code>
<code>dd if=ipxe.usb of=/dev/vda conv=sync # write image to harddisk</code>
<code>reboot -f # restart now</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd03693c" class="outline-4">
<h4 id="orgd03693c">use iPXE boot a linux in RAM</h4>
<div class="outline-text-4" id="text-orgd03693c">
<p>
now please connect vps&rsquo;s screen, use out-of-band management console
</p>

<p>
note: if vps privoder not have network autoconf, you may be need configure network manual
</p>

<p>
If it success, you now can seem a menu.
</p>

<p>
please select &rsquo;slackware&rsquo; to boot
</p>

<p>
if it failed:
</p>

<pre class="example">
<code>booting from Hard Disk...</code>
<code>iPXE initialising devices...ok</code>
<code></code>
<code></code>
<code></code>
<code>iPXE 1.21.1+ (g081b3) -- Open Source Network Boot Firmware -- https://ipxe.org</code>
<code>Features: DNS FTP HTTP HTTPS iSCSI TFTP SRP VLAN AoE ELF MBOOT PXE bzImage Menu </code>
<code>PXEXT</code>
<code></code>
<code>boot.salstar.sk - SAL's boot menu</code>
<code></code>
<code>Waiting for link-up on net0... ok</code>
<code>Configuring (net0 52:54:00:12:34:56)...... ok</code>
<code>IP: 10.0.2.15, netmask: 255.255.255.0, gateway: 10.0.2.2</code>
<code>Could not get time and date: Connection timed out (https://ipxe.org/4c496035)</code>
<code>https://boot.salstar.sk/by_mac/52:54:00:12:34:56... Network unreachable (https:/</code>
<code>/ipxe.org/280a6011)</code>
<code>https://boot.salstar.sk/by_ip/10.0.2.15... Network unreachable (https://ipxe.org</code>
<code>/280a6011)</code>
<code>https://boot.salstar.sk/menu.ipxe... Network unreachable (https://ipxe.org/280a6</code>
<code>011)</code>
<code>Press any key to enter failsafe menu ...</code>
</pre>

<p>
please press ENTER to start failsafe menu.
</p>

<p>
select &rsquo;Start iPXE shell&rsquo;
</p>

<p>
iPXE shell:
</p>

<pre class="example">
<code>iPXE&gt; </code>
</pre>

<p>
you can boot &rsquo;slackware&rsquo; by:
</p>

<pre class="example">
<code>kernel ftp://&lt;ip addr or domain name&gt;/slackware/slackware64-current/kernels/huge.s/bzImage</code>
<code>initrd ftp://&lt;ip addr or domain name&gt;/slackware/slackware64-current/isolinux/initrd.img</code>
<code>boot</code>
</pre>

<p>
note: if your dns not working, please use ip address instead domain name.
</p>
</div>
</div>
</div>

<div id="outline-container-orgcd84177" class="outline-3">
<h3 id="orgcd84177">Stage 1 download 9front image and write to disk</h3>
<div class="outline-text-3" id="text-orgcd84177">
</div>
<div id="outline-container-org7523ad3" class="outline-4">
<h4 id="org7523ad3">Download 9front image</h4>
<div class="outline-text-4" id="text-org7523ad3">
<p>
use root login, then:
</p>

<div class="org-src-container">
<pre class="src src-shell"><code>dhcpcd eth0 # setup network</code>
<code>wget http://9front.org/iso/9front-&lt;version&gt;.amd64.iso.gz # download</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf7ff797" class="outline-4">
<h4 id="orgf7ff797">write 9front image to disk</h4>
<div class="outline-text-4" id="text-orgf7ff797">
<div class="org-src-container">
<pre class="src src-shell"><code>zcat 9front-&lt;version&gt;.amd64.iso.gz | dd bs=1M of=/dev/vda conv=sync # write</code>
<code>sync # ensure sync to disk</code>
<code>reboot # reboot</code>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4d50de2" class="outline-3">
<h3 id="org4d50de2">Stage 2 install 9front</h3>
<div class="outline-text-3" id="text-org4d50de2">
<p>
now you can install 9front.
</p>

<p>
but have some notice:
</p>
</div>

<div id="outline-container-org8b9ac74" class="outline-4">
<h4 id="org8b9ac74">configfs</h4>
<div class="outline-text-4" id="text-org8b9ac74">
<p>
if vps&rsquo;s disk size is small , please use hjfs.
</p>
</div>
</div>

<div id="outline-container-orgfd08d77" class="outline-4">
<h4 id="orgfd08d77">prepdisk</h4>
<div class="outline-text-4" id="text-orgfd08d77">
<p>
in prepdisk phases, you can&rsquo;t remove installation image&rsquo;s part.
</p>

<p>
safe method is create a new part in space outside the installation image
</p>

<pre class="example">
<code>If there is enough room, a Plan 9 partition will be</code>
<code>suggested; you can probably just type 'w' and then 'q'.</code>
<code></code>
<code>cylinder = 1048576 bytes</code>
<code>   empty                 0 463          (463 cylinders, 463.00 MB)</code>
<code>   * p1                  463 464        (1 cylinders, 1.00 MB) ESP</code>
<code>  '  p2                  464 4560       (4096 cylinders, 4.00 GB) PLAN9 # this is new part , outside of installation image</code>
<code>&gt;&gt;&gt; w</code>
<code>&gt;&gt;&gt; q</code>
</pre>
</div>
</div>
</div>

<div id="outline-container-org58118e2" class="outline-3">
<h3 id="org58118e2">All is done</h3>
<div class="outline-text-3" id="text-org58118e2">
<p>
after installation, all is done, reboot your vps and use 9front!
</p>
</div>
</div>


<div id="outline-container-orgfcd5552" class="outline-3">
<h3 id="orgfcd5552">References</h3>
<div class="outline-text-3" id="text-orgfcd5552">
<p>
<a href="http://boot.salstar.sk/">http://boot.salstar.sk/</a>
</p>

<p>
<a href="http://9front.org/releases/">http://9front.org/releases/</a>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p>Last updated: 2023-02-25</p>
</div>
</body>
</html>
